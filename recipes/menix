#! /bin/sh

name=menix
from_source=menix
revision=1
hostdeps="gcc"
skip_pkg_check=yes

MENIX_ARCH="${JINX_ARCH}"
case "${MENIX_ARCH}" in
    "riscv64") MENIX_ARCH="riscv64gc" ;;
esac

build() {
    meson compile -j${parallelism}
}

package() {
    DESTDIR="${dest_dir}" meson install --no-rebuild

    mkdir -p ${dest_dir}/usr/share/menix/modules
    touch ${dest_dir}/usr/share/menix/modules/.keep
}
